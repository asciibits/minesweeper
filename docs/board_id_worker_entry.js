import{e as g,h as w,i as E,j as f,k as S,m as T,n as v}from"./chunk-D23Y7H3Q.js";var r=class{width;height;cellData;cachedElapsedTime;boardId;viewState;elapsedTime;constructor(){}encodeBoardState(s){let{width:a,height:e,cellData:t,elapsedTime:i}=s,d=!1,n=!1;if(a===this.width&&e===this.height){d=!0,n=!0;let m=this.cellData??[];for(let o=0;o<t.length;o++)if(t[o]!==m[o]&&(n=!1,t[o].isMine!==m[o]?.isMine)){d=!1;break}}let l=d?this.boardId:w(s),h=n?this.viewState:E(s),p=i===this.cachedElapsedTime?this.elapsedTime:f(i);return this.width=a,this.height=e,this.cellData=t,this.cachedElapsedTime=i,this.boardId=l,this.viewState=h,this.elapsedTime=p,{boardId:l,viewState:h,elapsedTime:p}}};if(typeof window>"u"&&typeof onmessage<"u"){let c=new r;onmessage=s=>{g("Processing web worker event: %o",s);let a=s.data;switch(a.messageType){case"ENCODE":{let{boardState:e}=a;T(e);let t=c.encodeBoardState(e);postMessage({messageType:"ENCODE",encodedBoardState:t});break}case"DECODE":{let{encodedBoardState:e}=a;v(e);let t=S(e);postMessage({messageType:"DECODE",boardState:t});break}default:throw new Error("Unknown message type: "+a.messageType)}}}
